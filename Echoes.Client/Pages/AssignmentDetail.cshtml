@page "/assignments/{assignmentId}"
@using Echoes.Shared.Models
@inject HttpClient Http
@inject Microsoft.AspNetCore.Blazor.Services.IUriHelper UriHelper


@if (!(Assignment is null))
{
    <div class="form-group">
        <input class="form-control" bind="@Assignment.Title" />
    </div>
    <div class="form-group">
        <input class="form-control" bind="@Assignment.Description" />
    </div>
    <button class="btn btn-success" onclick="@SaveAsync">Save</button>
}

@functions
{
[Parameter]
private string AssignmentId { get; set; }

private AssignmentDto Assignment { get; set; }

protected override async Task OnInitAsync()
{
    Assignment = await Http.GetJsonAsync<AssignmentDto>("/api/assignments/" + AssignmentId);
}

private async Task SaveAsync()
{
    await Http.PutJsonAsync("/api/assignments/" + AssignmentId, Assignment);
    UriHelper.NavigateTo("/assignments");
}
}